<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ... (head section remains unchanged) -->
  </head>
  <body>
    <h1>Common Illness Report</h1>

    <!-- Form for selecting date -->
    <form method="post" action="{{ url_for('common_illness.admin_route') }}">
      <label for="selected_date">Select Date:</label>
      <input
        type="text"
        id="selected_date"
        name="selected_date"
        value="{% if selected_date is not none %}{{ selected_date.strftime('%Y-%m-%d') }}{% endif %}"
        oninput="updateDateValue(this)"
      />
      <button type="submit">Filter</button>
    </form>

    <!-- Display most common illness information -->
    {% if most_common_illness_info %}
    <h2>Most Common Illness:</h2>
    <p><strong>Illness:</strong> {{ most_common_illness_info.illness }}</p>
    <p><strong>Symptoms:</strong> {{ most_common_illness_info.symptoms }}</p>
    <p>
      <strong>Visited Doctors:</strong> {{
      most_common_illness_info.visited_doctors }}
    </p>
    {% else %}
    <p>{{ most_common_illness_info }}</p>
    {% endif %}

    <!-- Display filtered dataset in a table -->
    {% if table_html %}
    <h2>Filtered Dataset:</h2>
    {{ table_html | safe }} {% else %}
    <p>No data available.</p>
    {% endif %}

    <!-- Debugging Information -->
    <hr />
    <h2>Debugging Information:</h2>
    <p><strong>Selected Date (String):</strong> {{ selected_date_str }}</p>
    <p><strong>Selected Date (Datetime):</strong> {{ selected_date }}</p>

    <script>
      function updateDateValue(input) {
        // Extract YYYY-MM-DD format from the input
        var dateValue = input.value;

        // Set the input value with the correct format
        input.value = dateValue;
      }
    </script>
  </body>
</html>
